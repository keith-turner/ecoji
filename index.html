<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8"/>
    		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		<script src="wasm_exec.js"></script>
		<script>
			const go = new Go();
			const ecojiPromise = WebAssembly.instantiateStreaming(fetch("main.wasm"), go.importObject).then((result) => {
				go.run(result.instance);

			});
console.log("here")
                        function doEncode(){
				var data = document.getElementById('plain').value
				var encoded = ecojiEncode(data)
				document.getElementById('encoded').value = encoded
			}

                        function doDecode(){
				var data = document.getElementById('encoded').value
				var decoded = ecojiDecode(data)
				document.getElementById('plain').value = decoded
			}

			function doPopulate(ep) {
				if(ep) {
					document.getElementById('encoded').value = ep
                                	var decoded = ecojiDecode(ep)
                                	document.getElementById('plain').value = decoded
				}
			}

			function doLinkEncode(){
				var data = document.getElementById('plain').value
                                var encoded = ecojiEncode(data)
				encoded = "http://ecoji.io/?d="+encoded
				document.getElementById('encoded').value = encoded
			}

		</script>

	   	 <!-- Bootstrap CSS -->
		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

		    <!-- Custom styles for this template -->
    <link href="cover.css" rel="stylesheet">

		<title>Ecoji.io</title>
	</head>
	<body class="text-center">
		<div class="cover-container d-flex w-100 h-100 p-3 mx-auto flex-column">
			<header class="masthead mb-auto">
    				<div class="inner justify-content-left">
      					<h3 class="masthead-brand">Ecoji.io | ğŸ£ğŸ”‰ğŸ¦ğŸ”¼ğŸğŸ–ŒğŸ¥°â˜•</h3>
    				</div>
  			</header>
			<main role="main" class="inner cover">
				<p class="lead">Encode using <a class="text-primary" href="https://github.com/keith-turner/ecoji">Ecoji</a></p>
				<textarea id="plain" class="form-control" rows="4" oninput="doEncode()"></textarea>
				<br/>
				<p/>
				<p class="lead">Decode using <a class="text-primary" href="https://github.com/keith-turner/ecoji">Ecoji</a></p>
				<textarea id="encoded" class="form-control" rows="4" oninput="doDecode()"></textarea>
				<p>
				<br/>
				<button type="button" class="btn btn-primary" onclick="doLinkEncode()">Link</button>
			</main>


      <footer class="mastfoot mt-auto">
        <div class="inner">
		<p>ğŸµğŸ˜¢ğŸ‡±ğŸ•ğŸ’ªğŸ”¥ğŸ‡²ğŸŒ°ğŸ‘¶ğŸš®ğŸ‡±ğŸŒ©ğŸ‘®ğŸ”¥ğŸ†šğŸ‡µğŸ‘²ğŸ›ƒğŸªğŸŒ»ğŸµğŸ˜½ğŸ¦ğŸ¤–ğŸ’¢ğŸ•¦ğŸ©ğŸ”ğŸ‘ğŸ™ğŸ›ŒğŸ¤˜ğŸ‘¦ğŸ–ğŸ¨ğŸˆšğŸ’¢ğŸ›¥ğŸ£ğŸ”¸ğŸ’™ğŸ™ğŸ©ğŸ¤œğŸ‘ºğŸ•ºğŸ¦“ğŸŒºğŸ‘¦ğŸ”¥ğŸ¦ğŸ¤•ğŸ½ğŸš‚ğŸŒŸğŸ¤’ğŸ’ğŸ“’â˜•â˜•</p>
        </div>
      </footer>
		</div>

		<!-- Optional JavaScript -->
	    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
	    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
	    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
	    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
		<script>
			ecojiPromise.then(() => {doPopulate(new URLSearchParams(window.location.search).get("d"))})
		</script>

	</body>
</html>
